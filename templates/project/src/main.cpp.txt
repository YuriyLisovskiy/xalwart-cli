/*
 * Copyright (c) <% .Common.Year %> <% .Common.Username %>
 */

// STL
#include <iostream>

// <% .Common.FrameworkName %>
#include <<% .Common.FrameworkName %>/conf/application.h>

// <% .ProjectName %>
#include "./config/settings.h"


int main(int argc, char** argv)
{
	<% .Common.FrameworkNamespace %>::conf::initialize_signal_handlers();
	std::unique_ptr<Settings> settings;
	try
	{
		settings = Settings::load();
		<% .Common.FrameworkNamespace %>::conf::Application(settings.get())
			.configure()
			.execute(argc, argv);
	}
	catch (const <% .Common.FrameworkNamespace %>::ImproperlyConfigured& exc)
	{
		if (settings && settings->LOGGER)
		{
			settings->LOGGER->error(exc);
		}
		else
		{
			std::cerr << exc.get_message() << std::endl;
		}
	}

	return 0;
}
